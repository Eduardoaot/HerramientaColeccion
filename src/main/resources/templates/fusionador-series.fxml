<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox spacing="15.0" xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="mk.coleccion.controlador.APP.FusionadorSeriesController"
      style="-fx-background-color: #f5f5f5;">
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
    </padding>

    <!-- TÃ­tulo -->
    <Label text="ðŸ”€ Fusionador de Series Duplicadas"
           style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #333333;"/>

    <Label text="Detecta y fusiona series que fueron creadas como duplicados durante el web scraping."
           style="-fx-font-size: 13px; -fx-text-fill: #666666;"
           wrapText="true"/>

    <Separator/>

    <!-- Barra de acciones -->
    <HBox spacing="10.0" alignment="CENTER_LEFT">
        <Button fx:id="btnDetectar" text="ðŸ” Detectar Series Similares"
                style="-fx-background-color: #007bff; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20 10 20;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <ProgressIndicator fx:id="progressIndicator" prefWidth="30.0" prefHeight="30.0"/>
        <Button fx:id="btnFusionar" text="âœ… Ejecutar FusiÃ³n"
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20 10 20;"/>
    </HBox>

    <!-- Estado -->
    <Label fx:id="lblEstado" text="ðŸ‘† Haz clic en 'Detectar Series Similares' para comenzar"
           style="-fx-font-size: 12px; -fx-text-fill: #666666; -fx-font-style: italic;"
           wrapText="true"/>

    <Separator/>

    <!-- Contenedor principal -->
    <SplitPane dividerPositions="0.4" VBox.vgrow="ALWAYS">

        <!-- Panel izquierdo: Lista de grupos -->
        <VBox spacing="10.0">
            <padding>
                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
            </padding>

            <Label text="ðŸ“‹ Grupos de Series Similares"
                   style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

            <ListView fx:id="listGrupos" VBox.vgrow="ALWAYS"
                      style="-fx-border-color: #cccccc; -fx-border-width: 1;"/>

            <Label text="Selecciona un grupo para ver detalles"
                   style="-fx-font-size: 11px; -fx-text-fill: #666666; -fx-font-style: italic;"
                   wrapText="true"/>
        </VBox>

        <!-- Panel derecho: Detalle y previsualizaciÃ³n -->
        <VBox spacing="10.0">
            <padding>
                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
            </padding>

            <!-- Panel de detalle -->
            <VBox fx:id="panelDetalle" spacing="10.0" VBox.vgrow="SOMETIMES"
                  style="-fx-border-color: #cccccc; -fx-border-width: 1; -fx-background-color: white; -fx-padding: 15;">
                <Label text="Selecciona un grupo para ver los detalles"
                       style="-fx-font-style: italic; -fx-text-fill: #999999;"/>
            </VBox>

            <Separator/>

            <!-- Log de previsualizaciÃ³n -->
            <VBox spacing="5.0" VBox.vgrow="ALWAYS">
                <Label text="ðŸ“Š PrevisualizaciÃ³n y Log"
                       style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                <TextArea fx:id="txtLog" editable="false" wrapText="true"
                          VBox.vgrow="ALWAYS" prefHeight="250.0"
                          style="-fx-font-family: 'Courier New'; -fx-font-size: 11px; -fx-control-inner-background: #1e1e1e; -fx-text-fill: #00ff00;"/>
            </VBox>
        </VBox>
    </SplitPane>

    <!-- InformaciÃ³n de ayuda -->
    <HBox spacing="10.0" style="-fx-background-color: #fff3cd; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
        <Label text="ðŸ’¡" style="-fx-font-size: 20px;"/>
        <VBox spacing="5.0">
            <Label text="CÃ“MO USAR:"
                   style="-fx-font-weight: bold; -fx-font-size: 12px;"/>
            <Label text="1. Detecta grupos de series similares"
                   style="-fx-font-size: 11px;"/>
            <Label text="2. Selecciona un grupo para ver sus series"
                   style="-fx-font-size: 11px;"/>
            <Label text="3. Elige quÃ© serie serÃ¡ el destino (todas las demÃ¡s se fusionarÃ¡n en ella)"
                   style="-fx-font-size: 11px;"/>
            <Label text="4. Revisa la previsualizaciÃ³n en el log"
                   style="-fx-font-size: 11px;"/>
            <Label text="5. Ejecuta la fusiÃ³n cuando estÃ©s seguro"
                   style="-fx-font-size: 11px;"/>
        </VBox>
    </HBox>

    <Label text="âš ï¸ IMPORTANTE: La fusiÃ³n es permanente y no se puede deshacer. AsegÃºrate de revisar la previsualizaciÃ³n."
           style="-fx-font-size: 11px; -fx-text-fill: #dc3545; -fx-font-weight: bold;"
           wrapText="true"/>
</VBox>
